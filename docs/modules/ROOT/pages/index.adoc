:midnight: https://midnight.network/[Midnight]
:nvm: https://github.com/nvm-sh/nvm[nvm]
:yarn: https://yarnpkg.com/getting-started/install[yarn]
:turbo: https://turborepo.com/docs/getting-started/installation[turbo]
:compact-dev-tools: https://docs.midnight.network/blog/compact-developer-tools[Compact Developer Tools]

= Contracts for Compact

*A library for secure smart contract development* written in Compact for {midnight}.
This library consists of modules to build custom smart contracts.

WARNING: This repo contains highly experimental code. Expect rapid iteration. *Use at your own risk.*

== Installation

Make sure you have {nvm}, {yarn}, and {turbo} installed on your machine.

Follow Midnight's {compact-dev-tools} installation guide and confirm that `compact` is in the `PATH` env variable.

```bash
$ compact compile --version

Compactc version: 0.24.0
0.24.0
```

=== Set up the project

Clone the repository:

```bash
git clone git@github.com:OpenZeppelin/midnight-contracts.git
```

`cd` into it and then install dependencies and prepare the environment:

```bash
nvm install && \
yarn && \
turbo compact
```

== Usage

Compile the contracts:

```bash
$ turbo compact

(...)
✔ [COMPILE] [1/2] Compiled FungibleToken.compact
@openzeppelin-compact/fungible-token:compact:     Compactc version: 0.24.0
@openzeppelin-compact/fungible-token:compact:
✔ [COMPILE] [1/6] Compiled Initializable.compact
@openzeppelin-compact/utils:compact:     Compactc version: 0.24.0
@openzeppelin-compact/utils:compact:
✔ [COMPILE] [2/6] Compiled Pausable.compact
@openzeppelin-compact/utils:compact:     Compactc version: 0.24.0
@openzeppelin-compact/utils:compact:
✔ [COMPILE] [3/6] Compiled Utils.compact
@openzeppelin-compact/utils:compact:     Compactc version: 0.24.0
@openzeppelin-compact/utils:compact:
✔ [COMPILE] [4/6] Compiled test/mocks/MockInitializable.compact
@openzeppelin-compact/utils:compact:     Compactc version: 0.24.0
@openzeppelin-compact/utils:compact:     Compiling 3 circuits:
✔ [COMPILE] [5/6] Compiled test/mocks/MockPausable.compact
@openzeppelin-compact/utils:compact:     Compactc version: 0.24.0
@openzeppelin-compact/utils:compact:     Compiling 5 circuits:
✔ [COMPILE] [6/6] Compiled test/mocks/MockUtils.compact
@openzeppelin-compact/utils:compact:     Compactc version: 0.24.0
@openzeppelin-compact/utils:compact:

✔ [COMPILE] [2/2] Compiled test/mocks/MockFungibleToken.compact
@openzeppelin-compact/fungible-token:compact:     Compactc version: 0.24.0
@openzeppelin-compact/fungible-token:compact:     Compiling 15 circuits:


 Tasks:    2 successful, 2 total
Cached:    0 cached, 2 total
  Time:    7.178s
```

NOTE: Speed up the development process by skipping the prover and verifier key file generation: +
`SKIP_ZK=true turbo compact`

Run tests:

```bash
turbo test
```
